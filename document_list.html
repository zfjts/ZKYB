<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文档管理</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#0f172a',
                        secondary: '#1e40af',
                        accent: '#3b82f6',
                        neon: '#06b6d4',
                        dark: '#020617',
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .bg-gradient-tech {
                background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            }
            .text-shadow-neon {
                text-shadow: 0 0 8px rgba(6, 182, 212, 0.5);
            }
            .border-glow {
                box-shadow: 0 0 5px rgba(6, 182, 212, 0.7);
            }
            .align-middle {
                vertical-align: middle;
            }
            .text-shadow-neon {
                text-shadow: 0 0 8px rgba(6, 182, 212, 0.5);
            }
            .border-glow {
                box-shadow: 0 0 5px rgba(6, 182, 212, 0.7);
            }
            .card-hover {
                transition: all 300ms ease;
                will-change: transform;
            }
            .card-hover:hover {
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05), 0 0 10px rgba(6, 182, 212, 0.2);
                transform: translateY(-1px);
            }
        }
    </style>
</head>
<body class="bg-dark text-gray-100 min-h-screen font-sans flex flex-col bg-gradient-tech">
    <!-- 导航栏 -->
    <nav class="bg-primary/80 backdrop-blur-md shadow-md border-b border-neon/20 sticky top-0 z-10">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fa fa-cogs text-2xl"></i>
                <span class="text-xl font-bold">自控设备全生命周期管理平台</span>
            </div>
            <div class="hidden md:flex space-x-6">
                <a href="/" class="font-medium text-gray-300 hover:text-neon transition-colors duration-300">首页</a>
                <a href="/equipment/" class="font-medium text-gray-300 hover:text-neon transition-colors duration-300">设备管理</a>
                <a href="/documents/" class="font-semibold text-neon border-b-2 border-neon pb-1 hover:text-neon transition-colors duration-300">文档管理</a>
            </div>
            <div class="md:hidden">
                <button class="text-white focus:outline-none">
                    <i class="fa fa-bars text-xl"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- 主要内容 -->
    <main class="container mx-auto px-4 py-8">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
            <h1 class="text-2xl font-bold text-white mb-4 md:mb-0">文档管理</h1>
            <div class="flex flex-col sm:flex-row gap-4">
                <a href="/documents/create/" class="bg-neon hover:bg-neon/90 text-primary font-medium px-6 py-2 rounded-md flex items-center justify-center transition-all duration-300 shadow-lg shadow-neon/20 hover:shadow-neon/40 hover:shadow-lg border-glow">
                    <i class="fa fa-upload mr-2"></i>上传文档
                </a>
                <div class="relative">
                    <input type="text" placeholder="搜索文档..." class="pl-10 pr-4 py-2 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-neon/50 focus:border-neon text-black w-full sm:w-64">
                    <i class="fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                </div>
            </div>
        </div>

        <!-- 筛选条件 -->
        <div class="rounded-xl shadow-lg p-4 mb-6 border border-neon/20">
            <div class="flex flex-col md:flex-row gap-4">
                <div class="flex-1">
                    <label class="block text-sm font-medium text-gray-300 mb-1">文档分类</label>
                    <select class="w-full px-3 py-2 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-neon/50 focus:border-neon text-black">
                        <option value="">全部分类</option>
                        <option value="说明书" {% if category == '说明书' %}selected{% endif %}>设备说明书</option>
                        <option value="技术规范" {% if category == '技术规范' %}selected{% endif %}>技术规范</option>
                        <option value="维护手册" {% if category == '维护手册' %}selected{% endif %}>维护手册</option>
                        <option value="其他" {% if category == '其他' %}selected{% endif %}>其他文档</option>
                    </select>
                </div>
                <div class="flex-1">
                    <label class="block text-sm font-medium text-gray-300 mb-1">关联设备</label>
                    <select class="w-full px-3 py-2 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-neon/50 focus:border-neon text-black">
                        <option value="">全部设备</option>
                        {% for eq in equipment_list %}
                            <option value="{{ eq.id }}" {% if equipment_id == eq.id %}selected{% endif %}>{{ eq.name }} ({{ eq.model }})</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="flex items-end">
                    <button class="bg-accent hover:bg-neon text-white px-4 py-2 rounded-md transition-all duration-300 hover:border-glow shadow-lg shadow-accent/20 hover:shadow-accent/40 border-glow">
                        <i class="fa fa-filter mr-1"></i>筛选
                    </button>
                </div>
            </div>
        </div>

        <!-- 文档列表 -->
        <div class="rounded-xl shadow-lg overflow-hidden border border-neon/20">
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="">
                    <tr>
                        <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-400 uppercase tracking-wider align-middle">标题</th>
                        <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-400 uppercase tracking-wider align-middle">分类</th>
                        <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-400 uppercase tracking-wider align-middle">文件类型</th>
                        <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-400 uppercase tracking-wider align-middle">关联设备</th>
                        <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-400 uppercase tracking-wider align-middle">上传日期</th>
                        <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-400 uppercase tracking-wider align-middle">操作</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-700">
                    {% if documents %} 
                        {% for doc in documents %} 
                            <tr class="transition-colors duration-150">
                                <td class="px-6 py-4 whitespace-nowrap text-center align-middle">
                                    <div class="font-medium text-white">{{ doc.title }}</div>
                                    <div class="text-sm text-gray-400">{{ doc.file_name }}</div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-center align-middle">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-900 text-blue-300">{{ doc.category }}</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400 text-center align-middle">
                                    {{ doc.file_type }}
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center align-middle">
                                    {% if doc.equipment_id %}
                                        {{ doc.equipment.name }} ({{ doc.equipment.model }})
                                    {% else %}
                                        无关联
                                    {% endif %}
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center align-middle">
                                    {{ doc.upload_date.strftime('%Y-%m-%d') }}
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-center text-sm font-medium align-middle">
                                    <a href="/documents/{{ doc.id }}" class="text-neon hover:text-neon/80 mr-3 transition-colors duration-300">
                                    <i class="fa fa-eye"></i> 查看
                                </a>
                                <a href="/documents/{{ doc.id }}/edit" class="text-blue-400 hover:text-blue-300 mr-3 transition-colors duration-300">
                                    <i class="fa fa-edit"></i> 编辑
                                </a>
                                </td>
                            </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td colspan="6" class="px-6 py-12 text-center text-gray-400 align-middle">
                                <i class="fa fa-file-text-o text-4xl mb-3"></i>
                                <p class="text-gray-400">暂无文档数据</p>
                                <a href="/documents/create/" class="text-neon hover:underline mt-2 inline-block transition-colors duration-300">上传文档</a>
                            </td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
    </main>

        <footer class="bg-gray-800 text-white py-8 mt-12">
            <div class="container mx-auto px-4 text-center">
                <p>自控设备全生命周期管理平台 &copy; 2025</p>
            </div>
        </footer>

    <script>
        // 简单的表单提交处理
        document.addEventListener('DOMContentLoaded', function() {
            // 分类筛选表单提交
            const filterSelect = document.querySelector('select');
            if (filterSelect) {
                filterSelect.addEventListener('change', function() {
                    const category = this.value;
                    window.location.href = `/documents/?category=${encodeURIComponent(category)}`;
                });
            }
        });
    </script>
</body>
</html>